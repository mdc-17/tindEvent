{"ast":null,"code":"var _jsxFileName = \"/Users/migueldominguezchamorro/Desktop/TindEvent/TindEvent-front/my-app/src/components/EditProfile.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport { withAuth } from \"../lib/AuthProvider\";\nimport service from '../api/services';\n\nfunction EditProfile(props) {\n  const [username, setUsername] = useState(props.user.username);\n  const [email, setEmail] = useState(props.user.email);\n  const [location, setLocation] = useState(props.user.location);\n  const [bio, setBio] = useState(props.user.bio);\n  const [picture, setPicture] = useState(props.user.picture);\n  const [birthDate, setBirthDate] = useState(props.user.birthDate);\n\n  const getUserInfo = async () => {\n    const me = await axios.get(`${process.env.REACT_APP_API_URI}/profile/${props.user._id}`);\n    setUsername(me.data.username);\n    setEmail(me.data.email);\n    setLocation(me.data.location);\n    setBio(me.data.bio);\n    setBirthDate(me.data.birthDate);\n    setPicture(me.data.picture);\n  };\n\n  useEffect(() => {\n    getUserInfo(); //eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // this method handles just the file upload\n\n  function handleFileUpload(e) {\n    const uploadData = new FormData();\n    uploadData.append(\"picture\", e.target.files[0]);\n    service.handleUpload(uploadData).then(response => {\n      setPicture(response.secure_url);\n    }).catch(err => {\n      console.log(\"Error while uploading the file: \", err);\n    });\n  }\n\n  ;\n  const history = useHistory();\n\n  async function handleFormSubmit(event) {\n    event.preventDefault();\n\n    try {\n      await axios.put(`${process.env.REACT_APP_API_URI}/profile/${props.user._id}/edit`, {\n        picture,\n        username,\n        email,\n        location,\n        birthDate,\n        bio\n      });\n      history.push(\"/Profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"profileCard\",\n    onSubmit: e => handleFormSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, \"Photo:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"picture\",\n    onChange: e => handleFileUpload(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"Username:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"email\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Location:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"location\",\n    value: location,\n    onChange: e => setLocation(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Birthdate:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"Date\",\n    name: \"birthDate\",\n    value: birthDate,\n    onChange: e => setBirthDate(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }, \"Bio:\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    type: \"text\",\n    name: \"bio\",\n    value: bio,\n    onChange: e => setBio(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    value: \"Submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, \"Edit\"))));\n}\n\nexport default withAuth(EditProfile);","map":{"version":3,"sources":["/Users/migueldominguezchamorro/Desktop/TindEvent/TindEvent-front/my-app/src/components/EditProfile.js"],"names":["React","useState","useEffect","axios","useHistory","withAuth","service","EditProfile","props","username","setUsername","user","email","setEmail","location","setLocation","bio","setBio","picture","setPicture","birthDate","setBirthDate","getUserInfo","me","get","process","env","REACT_APP_API_URI","_id","data","handleFileUpload","e","uploadData","FormData","append","target","files","handleUpload","then","response","secure_url","catch","err","console","log","history","handleFormSubmit","event","preventDefault","put","push","error","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from \"axios\"\nimport { useHistory } from \"react-router-dom\"\nimport { withAuth } from \"../lib/AuthProvider\";\nimport service from '../api/services'\n\n\nfunction EditProfile(props) {\n  const [username, setUsername] = useState(props.user.username);\n  const [email, setEmail] = useState(props.user.email);\n  const [location, setLocation] = useState(props.user.location);\n  const [bio, setBio] = useState(props.user.bio);\n  const [picture, setPicture] = useState(props.user.picture);\n  const [birthDate, setBirthDate] = useState(props.user.birthDate);\n  \n  const getUserInfo = async () => {\n    const me = await axios.get(`${process.env.REACT_APP_API_URI}/profile/${props.user._id}`);\n    setUsername(me.data.username)\n    setEmail(me.data.email)\n    setLocation(me.data.location)\n    setBio(me.data.bio)\n    setBirthDate(me.data.birthDate)\n    setPicture(me.data.picture)  \n  }\n \n  useEffect( () => {\n    getUserInfo()\n    //eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n  \n    // this method handles just the file upload\n     function handleFileUpload (e) {\n      const uploadData = new FormData();\n      uploadData.append(\"picture\", e.target.files[0]);\n      service\n        .handleUpload(uploadData)\n        .then((response) => {\n          setPicture(response.secure_url);\n        })\n        .catch((err) => {\n          console.log(\"Error while uploading the file: \", err);\n        });\n    };\n    \n    const history = useHistory();\n  \n  async function handleFormSubmit (event){\n    event.preventDefault();\n    try{\n      await axios.put(`${process.env.REACT_APP_API_URI}/profile/${props.user._id}/edit`, { picture , username, email, location, birthDate, bio })\n      history.push(\"/Profile\")\n      ;\n    }\n    catch(error){\n      console.log(error)\n    }\n  }\n\n  \n  return (\n        <div>\n      <div className =\"profile\">\n        <form className=\"profileCard\" onSubmit={e => handleFormSubmit(e)}>\n          \n        <label>Photo:</label>\n        <input \n        type='file' \n        name=\"picture\"\n        onChange={e => handleFileUpload(e)} \n        />\n          <br></br>\n          <label>Username:</label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={username}\n            onChange={e => setUsername(e.target.value)}\n          />\n          <br></br>\n          <label>Email:</label>\n          <input\n          type=\"text\"\n            name=\"email\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n          />\n          <br></br>\n          <label>Location:</label>\n          <input\n          type=\"text\"\n            name=\"location\"\n            value={location}\n            onChange={e => setLocation(e.target.value)}\n          />\n          <br></br>\n          <label>Birthdate:</label>\n          <input\n          type=\"Date\"\n            name=\"birthDate\" \n            value={birthDate}\n            onChange={e =>setBirthDate(e.target.value)}\n          />\n          <br></br>\n          <label>Bio:</label>\n          <textarea\n          type=\"text\"\n            name=\"bio\"\n            value={bio}\n            onChange={e => setBio(e.target.value)}\n          />\n          <br></br>\n\n          <button type=\"submit\" value=\"Submit\">Edit</button>\n        </form>\n      </div>\n      </div>\n    )\n}\nexport default withAuth(EditProfile)"]},"metadata":{},"sourceType":"module"}